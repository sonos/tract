[build-system]
requires = [
    "setuptools>=62.1<63",
    "setuptools_rust>=1.3<1.4",
    "wheel>=0.34<0.35",
]

[tool.cibuildwheel]
skip = "*-musllinux_i686"
environment = "PATH=$PATH:$HOME/.cargo/bin"
before-build = """
cargo --version || (curl https://sh.rustup.rs -sSf | sh -s -- -y --profile minimal
. $HOME/.cargo/env
rustup toolchain add stable
rustup default stable)
"""
before-test = """
wget https://sfo2.digitaloceanspaces.com/nnef-public/mobilenet_v2_1.0.onnx.nnef.tgz
cp {package}/grace_hopper_1x3x224x244.npy .
"""
test-command = "python {package}/mobilenet_nnef.py"
